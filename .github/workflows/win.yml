name: Windows CI

on: [pull_request]

jobs:
  build:
    runs-on: windows-latest
    steps:
      - uses: actions/checkout@v2
      - uses: ilammy/msvc-dev-cmd@v1
      - uses: conda-incubator/setup-miniconda@v2
        with:
          python-version: 3.7
          # mamba-version: "*"
          channels: conda-forge,defaults
          channel-priority: true
          # activate-environment: samurai-env
          # environment-file: conda/environment.yml
      - name: Conda informations
        shell: bash -l {0}
        run: |
            conda info
            conda list
            conda config --show
      - name: Set library path
        shell: bash -l {0}
        run: |
            ls $CONDA_PREFIX/Library/lib
      - name: Set environment variables on Windows
        shell: bash -l {0}
        run: |
          export INCLUDE=$CONDA_PREFIX/Library/include:$INCLUDE
          export LIB=$CONDA_PREFIX/Library/lib:$LIB
          export LIBPATH=$CONDA_PREFIX/Library/lib:$LIBPATH
      - name: print path
        shell: bash -l {0}
        run: |
          echo "cas 1"
          echo $LIB
          echo "cas 2"
          echo "%LIB%"
          echo "cas 3"
          echo "$LIB"
      # - name: Configure
      #   shell: bash -l {0}
      #   run: |
      #       CC=${{ matrix.cc }} CXX=${{ matrix.cxx }} cmake \
      #           . \
      #           -Bbuild \
      #           -GNinja \
      #           -DCMAKE_BUILD_TYPE=Release \
      #           -DBUILD_TESTS=ON
      # - name: Build
      #   shell: bash -l {0}
      #   run: |
      #       cmake --build build --target all
      # - name: Test
      #   shell: bash -l {0}
      #   run: |
      #       cd build
      #       ./test/test_samurai_lib
